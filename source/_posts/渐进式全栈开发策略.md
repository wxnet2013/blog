---
title: 渐进式全栈开发策略
date: 2017-06-16 11:18:25
tags: [全栈,Node]
---


## 组件化
1. 同一段代码不应该多次出现，复制粘贴代码会导致维护性灾难。
2. 充份利用npm组件生态，比如加密解密、日期格式化等。

## 初使状态

## 模块的雏形
我们很明显能感知到，这段逻辑是具备通用性的，可以写成插件。

但一开始的时候，功能还没完善，直接独立插件，维护起来比较麻烦。

此时，我们可以把代码写成插件的形式，但并不独立出去。

## js模块化
1. 了解CMD、AMD和UMD
2. ES6风格的模块，需要用webpack和babel做转换
```
npm
```

## Vue插件机制
1. 添加全局方法或者属性，如: vue-element
2. 添加全局资源：指令/过滤器/过渡等，如 vue-touch
3. 通过全局 mixin方法添加一些组件选项，如: vuex
4. 添加 Vue 实例方法，通过把它们添加到 Vue.prototype 上实现。
5. 一个库，提供自己的 API，同时提供上面提到的一个或多个功能，如 vue-router
```javascript
MyPlugin.install = function (Vue, options) {
  // 1. 添加全局方法或属性
  Vue.myGlobalMethod = function () {
    // 逻辑...
  }
  // 2. 添加全局资源
  Vue.directive('my-directive', {
    bind (el, binding, vnode, oldVnode) {
      // 逻辑...
    }
    ...
  })
  // 3. 注入组件
  Vue.mixin({
    created: function () {
      // 逻辑...
    }
    ...
  })
  // 4. 添加实例方法
  Vue.prototype.$myMethod = function (options) {
    // 逻辑...
  }
}
```
使用插件
```javascript
Vue.use(MyPlugin, { someOption: true })
```

## 最后
所有模块、插件，都应该有完善的单元测试，尽量做到代码覆盖率100%。
