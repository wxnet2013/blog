---
layout: default
title: 前端模块化
version: 0.0.1
---
## 阿里云服务器环境配置


购买成功后，root账号登录云服务器后，首先进行用户设置。

### 用户设置
修改超级管理员root密码
```bash
$ passwd
```
根据提示输入两次密码，很简单。

接着，要新建一个普通的管理账号，并设置密码。
```bash
$ useradd user1
$ passwd user1
```

将用户添加进管理组。
```bash
$ usermod -a -G wheel user1
```

设置用户的sudo权限。
```bash
$ visudo
```
实际上编辑的是/etc/sudoers文件。
找到 root    ALL=(ALL:ALL) ALL 这行，并下面添加一行
user1    ALL=(ALL:ALL) ALL
保存退出，以后就可用用sudo命令执行管理操作了。

### 修改主机名
[用户名@主机名 ~]$ 
```bash
$ hostname "www.chufa.la"
$ vi /etc/sysconfig/network
```
HOSTNAME=www.chufa.la

### SSH配置
将ssh的默认端口22改掉，以防止小黑扫描ssh，另外，禁止root通过ssh登录服务器，并允许新建的普通管理员登录。
```bash
$ vi /etc/ssh/sshd_config
```
找到 # Port 22 ，去掉＃并将22修改为1025到65536 之间的没被用到的端口号。
去掉注释 #PermitRootLogin yes 以禁止root直接登录。
添加 
AllowUsers bill
保存后，退出文件编辑。

重启sshd
```bash
$ service sshd restart
```
下次登录，就可以用指定的端口号登录了。
```bash
$ ssh user1@ip -p port 
```

### 挂载数据盘
为数据盘新建交换分区和普通分区并挂载。
首先查看查看数据盘
```bash
$ fdisk -l 
```
确认数据盘为 /dev/xvdb 
```bash
$ fdisk -S 56 /dev/xvdb
```
输入m查看帮助。
建立扩展分区。
n新建分区。
按p建立基本分区。
输入要建立的分区1
起始簇保持默认。
结束簇的位置输入 +2G ,一般扩展分区的大小为内容的两倍。
然后，重复上面的步骤，将剩下的分为数据盘，注意分区号为2。 

格式化分区
```bash
$ mkswap /dev/xvdb1
$ mkfs.ext4 /dev/xvdb2
```

启用swap 分区
```bash
$ swapon /dev/xvdb1
```
将第二个分区，挂载到 /data 目录
```bash
$ mkdir /data
```
修改fstab
```bash
$ vi /etc/fstab
```
添加
/dev/xvdb1              swap                    swap    defaults        0 0
/dev/xvdb2              /data                   ext4    defaults        0 0
保存文件，并退出编辑。

挂载
```bash
$ mount -a
```
下次启动系统就能自动挂载数据盘了。

### 软件安装 Nginx Mongo Node
安装nginx
```bash
$ vi /etc/yum.repos.d/nginx.repo
```

```
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/6/$basearch/
gpgcheck=0
enabled=1
```

保存文件，并退出编辑。

执行.
```bash
$ yum install nginx
```

安装mongodb
```bash
$ vi /etc/yum.repos.d/mongodb.repo
```

```
[mongodb]
name=MongoDB Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/
gpgcheck=0
enabled=1
```

保存文件，并退出编辑。

执行
```bash
$ yum install mongodb-org
```

安装Node和NPM
```bash
$ sudo yum install nodejs npm
```
